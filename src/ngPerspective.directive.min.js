!function(){"use strict";function e(e){function t(t,o,n,r){function i(){window.addEventListener("deviceorientation",l),"parent"===r.config.focalPoint?angular.element(angular.element(o[0]).parent()[0]).bind("mousemove",l):angular.element(e).bind("mousemove",l),v=c(o[0]),s=v.left+o.prop("clientWidth")/2,f=v.top+o.prop("clientHeight")/2}function c(e){var t=e.getBoundingClientRect(),o=window.pageYOffset||p.scrollTop||g.scrollTop,n=window.pageXOffset||p.scrollLeft||g.scrollLeft,r=p.clientTop||g.clientTop||0,i=p.clientLeft||g.clientLeft||0,c=t.top+o-r,a=t.left+n-i;return{top:c,left:a}}function a(e){var t=e||window.event,o=[];return o.x=t.clientX+(p&&p.scrollLeft||g&&g.scrollLeft||0)-(p.clientLeft||0),o.y=t.clientY+(p&&p.scrollTop||g&&g.scrollTop||0)-(p.clientTop||0),o}function l(n){var i,c,l=a(n),v=angular.element(o[0]),p=v.parent()[0];"elements"===r.config.focalPoint?(i=s-l.x,c=f-l.y):"window"===r.config.focalPoint?(i=e.innerHeight/2-l.x,c=e.innerHeight/2-l.y):"parent"===r.config.focalPoint&&(i=p.offsetLeft+angular.element(o[0]).parent()[0].clientWidth/2-l.x,c=p.offsetTop+angular.element(o[0]).parent()[0].clientHeight/2-l.y),"deviceorientation"===n.type&&(c=10*n.beta,i=10*n.gamma);var g={};g.moveX=t.moveZ?i*t.moveZ:i*t.moveX,g.moveY=t.moveZ?c*t.moveZ:c*t.moveY,g.xRotate=t.rotateZ?i*t.rotateZ:i*t.moveX,g.yRotate=t.rotateZ?c*t.rotateZ:c*t.moveY,Object.keys(g).map(function(e,t){g[e]=g[e]/r.config.perspectiveFactor}),m(g)}function m(e){var n="";t.rotateZ&&(n+="perspective( 600px ) rotateY( "+-e.xRotate+"deg ) rotateX( "+e.yRotate+"deg )"),t.moveZ&&(n+="translate("+e.moveX+"px, "+e.moveY+"px)"),!t.moveX||t.moveY||t.moveZ||(n+="translateX("+e.moveX+"px)"),t.moveX||!t.moveY||t.moveZ||(n+="translateY("+e.moveY+"px)"),t.moveX&&t.moveY&&!t.moveZ&&(n+="translate("+e.moveX+"px, "+e.moveY+"px)"),o.css("transform",n),o.css("-o-transform",n),o.css("-moz-transform",n),o.css("-webkit-transform",n),o.css("-ms-transform",n)}var s,f,v,p=document.documentElement,g=document.body;i(),angular.element(e).bind("resize",i)}function o(e){var t=this;return t.config={focalPoint:"parent",perspectiveFactor:10},Object.keys(e.config).map(function(o,n){t.config[o]=e.config[o]}),t}var n={restrict:"A",scope:{moveX:"=",moveY:"=",moveZ:"=",rotateZ:"="},link:t,controller:["ngPerspectiveConfig",o],controllerAs:"vm"};return n}angular.module("ngPerspective",[]).provider("ngPerspectiveConfig",function(){this.config={},this.$get=function(){return this}}).directive("ngPerspective",e),e.$inject=["$window"]}();